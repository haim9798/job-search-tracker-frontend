{"ast":null,"code":"import React from'react';import{useParams,useNavigate}from'react-router-dom';import{toast}from'react-hot-toast';import{ArrowLeftIcon}from'@heroicons/react/24/outline';import{AuthGuard}from'../components/auth';import{AppLayout}from'../components/layout';import{PositionDetails}from'../components/positions';import{Button}from'../components/ui';import{usePosition,useUpdatePosition,useDeletePosition,useUpdatePositionStatus}from'../hooks/usePositions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const PositionDetailsPage=()=>{const{id}=useParams();const navigate=useNavigate();const{data:position,isLoading,error}=usePosition(id);const updatePositionMutation=useUpdatePosition();const deletePositionMutation=useDeletePosition();const updateStatusMutation=useUpdatePositionStatus();const handleEdit=async(positionId,data)=>{try{await updatePositionMutation.mutateAsync({id:positionId,data});}catch(error){toast.error('Failed to update position');throw error;// Re-throw to let the component handle the error state\n}};const handleDelete=async positionId=>{try{await deletePositionMutation.mutateAsync(positionId);toast.success('Position deleted successfully');navigate('/dashboard');}catch(error){toast.error('Failed to delete position');}};const handleStatusUpdate=async(positionId,status)=>{try{await updateStatusMutation.mutateAsync({id:positionId,status});}catch(error){toast.error('Failed to update position status');throw error;}};const handleAddInterview=_positionId=>{// TODO: This will be implemented when interview management is added\n// For now, show a placeholder message\ntoast('Interview management coming soon!',{icon:'ðŸš§'});};const handleBack=()=>{navigate('/dashboard');};if(!id){return/*#__PURE__*/_jsx(AuthGuard,{children:/*#__PURE__*/_jsx(AppLayout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Position Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"The position you're looking for doesn't exist.\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleBack,className:\"mt-4\",children:\"Back to Dashboard\"})]})})})});}if(error){return/*#__PURE__*/_jsx(AuthGuard,{children:/*#__PURE__*/_jsx(AppLayout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Error Loading Position\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"There was an error loading the position details. Please try again.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4 mt-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",onClick:handleBack,children:\"Back to Dashboard\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>window.location.reload(),children:\"Retry\"})]})]})})})});}return/*#__PURE__*/_jsx(AuthGuard,{children:/*#__PURE__*/_jsx(AppLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(Button,{variant:\"ghost\",onClick:handleBack,className:\"mb-4\",children:[/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-4 w-4 mr-2\"}),\"Back to Dashboard\"]})}),/*#__PURE__*/_jsx(PositionDetails,{position:position,onEdit:handleEdit,onDelete:handleDelete,onStatusUpdate:handleStatusUpdate,onAddInterview:handleAddInterview,loading:isLoading})]})})});};export default PositionDetailsPage;","map":{"version":3,"names":["React","useParams","useNavigate","toast","ArrowLeftIcon","AuthGuard","AppLayout","PositionDetails","Button","usePosition","useUpdatePosition","useDeletePosition","useUpdatePositionStatus","jsx","_jsx","jsxs","_jsxs","PositionDetailsPage","id","navigate","data","position","isLoading","error","updatePositionMutation","deletePositionMutation","updateStatusMutation","handleEdit","positionId","mutateAsync","handleDelete","success","handleStatusUpdate","status","handleAddInterview","_positionId","icon","handleBack","children","className","variant","onClick","window","location","reload","onEdit","onDelete","onStatusUpdate","onAddInterview","loading"],"sources":["/home/haim/github/job-search-tracker-api/frontend/src/pages/PositionDetailsPage.tsx"],"sourcesContent":["import React from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { ArrowLeftIcon } from '@heroicons/react/24/outline';\nimport { AuthGuard } from '../components/auth';\nimport { AppLayout } from '../components/layout';\nimport { PositionDetails } from '../components/positions';\nimport { Button } from '../components/ui';\nimport { \n  usePosition, \n  useUpdatePosition, \n  useDeletePosition, \n  useUpdatePositionStatus \n} from '../hooks/usePositions';\nimport { PositionStatus, UpdatePositionData } from '../types';\n\nexport const PositionDetailsPage: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n\n  const { data: position, isLoading, error } = usePosition(id!);\n  const updatePositionMutation = useUpdatePosition();\n  const deletePositionMutation = useDeletePosition();\n  const updateStatusMutation = useUpdatePositionStatus();\n\n  const handleEdit = async (positionId: string, data: UpdatePositionData) => {\n    try {\n      await updatePositionMutation.mutateAsync({ id: positionId, data });\n    } catch (error) {\n      toast.error('Failed to update position');\n      throw error; // Re-throw to let the component handle the error state\n    }\n  };\n\n  const handleDelete = async (positionId: string) => {\n    try {\n      await deletePositionMutation.mutateAsync(positionId);\n      toast.success('Position deleted successfully');\n      navigate('/dashboard');\n    } catch (error) {\n      toast.error('Failed to delete position');\n    }\n  };\n\n  const handleStatusUpdate = async (positionId: string, status: PositionStatus) => {\n    try {\n      await updateStatusMutation.mutateAsync({ id: positionId, status });\n    } catch (error) {\n      toast.error('Failed to update position status');\n      throw error;\n    }\n  };\n\n  const handleAddInterview = (_positionId: string) => {\n    // TODO: This will be implemented when interview management is added\n    // For now, show a placeholder message\n    toast('Interview management coming soon!', {\n      icon: 'ðŸš§',\n    });\n  };\n\n  const handleBack = () => {\n    navigate('/dashboard');\n  };\n\n  if (!id) {\n    return (\n      <AuthGuard>\n        <AppLayout>\n          <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n            <div className=\"text-center\">\n              <h1 className=\"text-2xl font-bold text-gray-900\">Position Not Found</h1>\n              <p className=\"text-gray-600 mt-2\">The position you're looking for doesn't exist.</p>\n              <Button\n                variant=\"primary\"\n                onClick={handleBack}\n                className=\"mt-4\"\n              >\n                Back to Dashboard\n              </Button>\n            </div>\n          </div>\n        </AppLayout>\n      </AuthGuard>\n    );\n  }\n\n  if (error) {\n    return (\n      <AuthGuard>\n        <AppLayout>\n          <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n            <div className=\"text-center\">\n              <h1 className=\"text-2xl font-bold text-gray-900\">Error Loading Position</h1>\n              <p className=\"text-gray-600 mt-2\">\n                There was an error loading the position details. Please try again.\n              </p>\n              <div className=\"flex justify-center space-x-4 mt-4\">\n                <Button\n                  variant=\"ghost\"\n                  onClick={handleBack}\n                >\n                  Back to Dashboard\n                </Button>\n                <Button\n                  variant=\"primary\"\n                  onClick={() => window.location.reload()}\n                >\n                  Retry\n                </Button>\n              </div>\n            </div>\n          </div>\n        </AppLayout>\n      </AuthGuard>\n    );\n  }\n\n  return (\n    <AuthGuard>\n      <AppLayout>\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          {/* Header with back button */}\n          <div className=\"mb-6\">\n            <Button\n              variant=\"ghost\"\n              onClick={handleBack}\n              className=\"mb-4\"\n            >\n              <ArrowLeftIcon className=\"h-4 w-4 mr-2\" />\n              Back to Dashboard\n            </Button>\n          </div>\n\n          {/* Position Details */}\n          <PositionDetails\n            position={position}\n            onEdit={handleEdit}\n            onDelete={handleDelete}\n            onStatusUpdate={handleStatusUpdate}\n            onAddInterview={handleAddInterview}\n            loading={isLoading}\n          />\n        </div>\n      </AppLayout>\n    </AuthGuard>\n  );\n};\n\nexport default PositionDetailsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}