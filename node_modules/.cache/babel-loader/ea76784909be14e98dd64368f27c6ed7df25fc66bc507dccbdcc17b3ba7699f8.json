{"ast":null,"code":"import React from'react';import{Chart as ChartJS,ArcElement,Tooltip,Legend}from'chart.js';import{Doughnut}from'react-chartjs-2';import{PositionStatus}from'../../types';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(ArcElement,Tooltip,Legend);const STATUS_COLORS={[PositionStatus.APPLIED]:'#3B82F6',// Blue\n[PositionStatus.SCREENING]:'#F59E0B',// Amber\n[PositionStatus.INTERVIEWING]:'#8B5CF6',// Purple\n[PositionStatus.OFFER]:'#10B981',// Green\n[PositionStatus.REJECTED]:'#EF4444',// Red\n[PositionStatus.WITHDRAWN]:'#6B7280'// Gray\n};const STATUS_LABELS={[PositionStatus.APPLIED]:'Applied',[PositionStatus.SCREENING]:'Screening',[PositionStatus.INTERVIEWING]:'Interviewing',[PositionStatus.OFFER]:'Offer',[PositionStatus.REJECTED]:'Rejected',[PositionStatus.WITHDRAWN]:'Withdrawn'};export const PositionStatusChart=_ref=>{let{data,isLoading=false}=_ref;if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})});}if(!data||Object.keys(data).length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64 text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium mb-2\",children:\"No Data Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Start applying to positions to see statistics\"})]})});}// Filter out statuses with 0 count and prepare chart data\nconst filteredData=Object.entries(data).filter(_ref2=>{let[_,count]=_ref2;return count>0;}).sort((_ref3,_ref4)=>{let[,a]=_ref3;let[,b]=_ref4;return b-a;});// Sort by count descending\nif(filteredData.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64 text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium mb-2\",children:\"No Data Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Start applying to positions to see statistics\"})]})});}const chartData={labels:filteredData.map(_ref5=>{let[status]=_ref5;return STATUS_LABELS[status];}),datasets:[{data:filteredData.map(_ref6=>{let[_,count]=_ref6;return count;}),backgroundColor:filteredData.map(_ref7=>{let[status]=_ref7;return STATUS_COLORS[status];}),borderColor:filteredData.map(_ref8=>{let[status]=_ref8;return STATUS_COLORS[status];}),borderWidth:2,hoverBorderWidth:3}]};const options={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{padding:20,usePointStyle:true,font:{size:12}}},tooltip:{callbacks:{label:context=>{const label=context.label||'';const value=context.parsed;const total=context.dataset.data.reduce((a,b)=>a+b,0);const percentage=(value/total*100).toFixed(1);return\"\".concat(label,\": \").concat(value,\" (\").concat(percentage,\"%)\");}}}},cutout:'60%'};const totalPositions=filteredData.reduce((sum,_ref9)=>{let[_,count]=_ref9;return sum+count;},0);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h-64 relative\",children:[/*#__PURE__*/_jsx(Doughnut,{data:chartData,options:options}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center pointer-events-none\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900\",children:totalPositions}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:data[PositionStatus.OFFER]||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Offers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:data[PositionStatus.INTERVIEWING]||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Active\"})]})]})]});};","map":{"version":3,"names":["React","Chart","ChartJS","ArcElement","Tooltip","Legend","Doughnut","PositionStatus","jsx","_jsx","jsxs","_jsxs","register","STATUS_COLORS","APPLIED","SCREENING","INTERVIEWING","OFFER","REJECTED","WITHDRAWN","STATUS_LABELS","PositionStatusChart","_ref","data","isLoading","className","children","Object","keys","length","filteredData","entries","filter","_ref2","_","count","sort","_ref3","_ref4","a","b","chartData","labels","map","_ref5","status","datasets","_ref6","backgroundColor","_ref7","borderColor","_ref8","borderWidth","hoverBorderWidth","options","responsive","maintainAspectRatio","plugins","legend","position","padding","usePointStyle","font","size","tooltip","callbacks","label","context","value","parsed","total","dataset","reduce","percentage","toFixed","concat","cutout","totalPositions","sum","_ref9"],"sources":["/home/haim/github/job-search-tracker-api/frontend/src/components/statistics/PositionStatusChart.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  Chart as ChartJS,\n  ArcElement,\n  Tooltip,\n  Legend,\n  ChartOptions,\n} from 'chart.js';\nimport { Doughnut } from 'react-chartjs-2';\nimport { PositionStatus } from '../../types';\n\nChartJS.register(ArcElement, Tooltip, Legend);\n\ninterface PositionStatusChartProps {\n  data?: Record<PositionStatus, number> | undefined;\n  isLoading?: boolean;\n}\n\nconst STATUS_COLORS = {\n  [PositionStatus.APPLIED]: '#3B82F6', // Blue\n  [PositionStatus.SCREENING]: '#F59E0B', // Amber\n  [PositionStatus.INTERVIEWING]: '#8B5CF6', // Purple\n  [PositionStatus.OFFER]: '#10B981', // Green\n  [PositionStatus.REJECTED]: '#EF4444', // Red\n  [PositionStatus.WITHDRAWN]: '#6B7280', // Gray\n};\n\nconst STATUS_LABELS = {\n  [PositionStatus.APPLIED]: 'Applied',\n  [PositionStatus.SCREENING]: 'Screening',\n  [PositionStatus.INTERVIEWING]: 'Interviewing',\n  [PositionStatus.OFFER]: 'Offer',\n  [PositionStatus.REJECTED]: 'Rejected',\n  [PositionStatus.WITHDRAWN]: 'Withdrawn',\n};\n\nexport const PositionStatusChart: React.FC<PositionStatusChartProps> = ({\n  data,\n  isLoading = false,\n}) => {\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!data || Object.keys(data).length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-64 text-gray-500\">\n        <div className=\"text-center\">\n          <div className=\"text-lg font-medium mb-2\">No Data Available</div>\n          <p className=\"text-sm\">Start applying to positions to see statistics</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Filter out statuses with 0 count and prepare chart data\n  const filteredData = Object.entries(data)\n    .filter(([_, count]) => count > 0)\n    .sort(([, a], [, b]) => b - a); // Sort by count descending\n\n  if (filteredData.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-64 text-gray-500\">\n        <div className=\"text-center\">\n          <div className=\"text-lg font-medium mb-2\">No Data Available</div>\n          <p className=\"text-sm\">Start applying to positions to see statistics</p>\n        </div>\n      </div>\n    );\n  }\n\n  const chartData = {\n    labels: filteredData.map(([status]) => STATUS_LABELS[status as PositionStatus]),\n    datasets: [\n      {\n        data: filteredData.map(([_, count]) => count),\n        backgroundColor: filteredData.map(([status]) => STATUS_COLORS[status as PositionStatus]),\n        borderColor: filteredData.map(([status]) => STATUS_COLORS[status as PositionStatus]),\n        borderWidth: 2,\n        hoverBorderWidth: 3,\n      },\n    ],\n  };\n\n  const options: ChartOptions<'doughnut'> = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom',\n        labels: {\n          padding: 20,\n          usePointStyle: true,\n          font: {\n            size: 12,\n          },\n        },\n      },\n      tooltip: {\n        callbacks: {\n          label: (context) => {\n            const label = context.label || '';\n            const value = context.parsed;\n            const total = context.dataset.data.reduce((a, b) => a + b, 0);\n            const percentage = ((value / total) * 100).toFixed(1);\n            return `${label}: ${value} (${percentage}%)`;\n          },\n        },\n      },\n    },\n    cutout: '60%',\n  };\n\n  const totalPositions = filteredData.reduce((sum, [_, count]) => sum + count, 0);\n\n  return (\n    <div className=\"relative\">\n      <div className=\"h-64 relative\">\n        <Doughnut data={chartData} options={options} />\n        {/* Center text showing total */}\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-gray-900\">{totalPositions}</div>\n            <div className=\"text-sm text-gray-600\">Total</div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Summary stats below chart */}\n      <div className=\"mt-4 grid grid-cols-2 gap-4 text-sm\">\n        <div className=\"text-center\">\n          <div className=\"font-medium text-gray-900\">\n            {data[PositionStatus.OFFER] || 0}\n          </div>\n          <div className=\"text-gray-600\">Offers</div>\n        </div>\n        <div className=\"text-center\">\n          <div className=\"font-medium text-gray-900\">\n            {data[PositionStatus.INTERVIEWING] || 0}\n          </div>\n          <div className=\"text-gray-600\">Active</div>\n        </div>\n      </div>\n    </div>\n  );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OACEC,KAAK,GAAI,CAAAC,OAAO,CAChBC,UAAU,CACVC,OAAO,CACPC,MAAM,KAED,UAAU,CACjB,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,cAAc,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7CT,OAAO,CAACU,QAAQ,CAACT,UAAU,CAAEC,OAAO,CAAEC,MAAM,CAAC,CAO7C,KAAM,CAAAQ,aAAa,CAAG,CACpB,CAACN,cAAc,CAACO,OAAO,EAAG,SAAS,CAAE;AACrC,CAACP,cAAc,CAACQ,SAAS,EAAG,SAAS,CAAE;AACvC,CAACR,cAAc,CAACS,YAAY,EAAG,SAAS,CAAE;AAC1C,CAACT,cAAc,CAACU,KAAK,EAAG,SAAS,CAAE;AACnC,CAACV,cAAc,CAACW,QAAQ,EAAG,SAAS,CAAE;AACtC,CAACX,cAAc,CAACY,SAAS,EAAG,SAAW;AACzC,CAAC,CAED,KAAM,CAAAC,aAAa,CAAG,CACpB,CAACb,cAAc,CAACO,OAAO,EAAG,SAAS,CACnC,CAACP,cAAc,CAACQ,SAAS,EAAG,WAAW,CACvC,CAACR,cAAc,CAACS,YAAY,EAAG,cAAc,CAC7C,CAACT,cAAc,CAACU,KAAK,EAAG,OAAO,CAC/B,CAACV,cAAc,CAACW,QAAQ,EAAG,UAAU,CACrC,CAACX,cAAc,CAACY,SAAS,EAAG,WAC9B,CAAC,CAED,MAAO,MAAM,CAAAE,mBAAuD,CAAGC,IAAA,EAGjE,IAHkE,CACtEC,IAAI,CACJC,SAAS,CAAG,KACd,CAAC,CAAAF,IAAA,CACC,GAAIE,SAAS,CAAE,CACb,mBACEf,IAAA,QAAKgB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpDjB,IAAA,QAAKgB,SAAS,CAAC,8DAA8D,CAAM,CAAC,CACjF,CAAC,CAEV,CAEA,GAAI,CAACF,IAAI,EAAII,MAAM,CAACC,IAAI,CAACL,IAAI,CAAC,CAACM,MAAM,GAAK,CAAC,CAAE,CAC3C,mBACEpB,IAAA,QAAKgB,SAAS,CAAC,qDAAqD,CAAAC,QAAA,cAClEf,KAAA,QAAKc,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjB,IAAA,QAAKgB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,mBAAiB,CAAK,CAAC,cACjEjB,IAAA,MAAGgB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,+CAA6C,CAAG,CAAC,EACrE,CAAC,CACH,CAAC,CAEV,CAEA;AACA,KAAM,CAAAI,YAAY,CAAGH,MAAM,CAACI,OAAO,CAACR,IAAI,CAAC,CACtCS,MAAM,CAACC,KAAA,MAAC,CAACC,CAAC,CAAEC,KAAK,CAAC,CAAAF,KAAA,OAAK,CAAAE,KAAK,CAAG,CAAC,GAAC,CACjCC,IAAI,CAAC,CAAAC,KAAA,CAAAC,KAAA,OAAC,EAAGC,CAAC,CAAC,CAAAF,KAAA,IAAE,EAAGG,CAAC,CAAC,CAAAF,KAAA,OAAK,CAAAE,CAAC,CAAGD,CAAC,GAAC,CAAE;AAElC,GAAIT,YAAY,CAACD,MAAM,GAAK,CAAC,CAAE,CAC7B,mBACEpB,IAAA,QAAKgB,SAAS,CAAC,qDAAqD,CAAAC,QAAA,cAClEf,KAAA,QAAKc,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjB,IAAA,QAAKgB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,mBAAiB,CAAK,CAAC,cACjEjB,IAAA,MAAGgB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,+CAA6C,CAAG,CAAC,EACrE,CAAC,CACH,CAAC,CAEV,CAEA,KAAM,CAAAe,SAAS,CAAG,CAChBC,MAAM,CAAEZ,YAAY,CAACa,GAAG,CAACC,KAAA,MAAC,CAACC,MAAM,CAAC,CAAAD,KAAA,OAAK,CAAAxB,aAAa,CAACyB,MAAM,CAAmB,GAAC,CAC/EC,QAAQ,CAAE,CACR,CACEvB,IAAI,CAAEO,YAAY,CAACa,GAAG,CAACI,KAAA,MAAC,CAACb,CAAC,CAAEC,KAAK,CAAC,CAAAY,KAAA,OAAK,CAAAZ,KAAK,GAAC,CAC7Ca,eAAe,CAAElB,YAAY,CAACa,GAAG,CAACM,KAAA,MAAC,CAACJ,MAAM,CAAC,CAAAI,KAAA,OAAK,CAAApC,aAAa,CAACgC,MAAM,CAAmB,GAAC,CACxFK,WAAW,CAAEpB,YAAY,CAACa,GAAG,CAACQ,KAAA,MAAC,CAACN,MAAM,CAAC,CAAAM,KAAA,OAAK,CAAAtC,aAAa,CAACgC,MAAM,CAAmB,GAAC,CACpFO,WAAW,CAAE,CAAC,CACdC,gBAAgB,CAAE,CACpB,CAAC,CAEL,CAAC,CAED,KAAM,CAAAC,OAAiC,CAAG,CACxCC,UAAU,CAAE,IAAI,CAChBC,mBAAmB,CAAE,KAAK,CAC1BC,OAAO,CAAE,CACPC,MAAM,CAAE,CACNC,QAAQ,CAAE,QAAQ,CAClBjB,MAAM,CAAE,CACNkB,OAAO,CAAE,EAAE,CACXC,aAAa,CAAE,IAAI,CACnBC,IAAI,CAAE,CACJC,IAAI,CAAE,EACR,CACF,CACF,CAAC,CACDC,OAAO,CAAE,CACPC,SAAS,CAAE,CACTC,KAAK,CAAGC,OAAO,EAAK,CAClB,KAAM,CAAAD,KAAK,CAAGC,OAAO,CAACD,KAAK,EAAI,EAAE,CACjC,KAAM,CAAAE,KAAK,CAAGD,OAAO,CAACE,MAAM,CAC5B,KAAM,CAAAC,KAAK,CAAGH,OAAO,CAACI,OAAO,CAAChD,IAAI,CAACiD,MAAM,CAAC,CAACjC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAAGC,CAAC,CAAE,CAAC,CAAC,CAC7D,KAAM,CAAAiC,UAAU,CAAG,CAAEL,KAAK,CAAGE,KAAK,CAAI,GAAG,EAAEI,OAAO,CAAC,CAAC,CAAC,CACrD,SAAAC,MAAA,CAAUT,KAAK,OAAAS,MAAA,CAAKP,KAAK,OAAAO,MAAA,CAAKF,UAAU,OAC1C,CACF,CACF,CACF,CAAC,CACDG,MAAM,CAAE,KACV,CAAC,CAED,KAAM,CAAAC,cAAc,CAAG/C,YAAY,CAAC0C,MAAM,CAAC,CAACM,GAAG,CAAAC,KAAA,OAAE,CAAC7C,CAAC,CAAEC,KAAK,CAAC,CAAA4C,KAAA,OAAK,CAAAD,GAAG,CAAG3C,KAAK,GAAE,CAAC,CAAC,CAE/E,mBACExB,KAAA,QAAKc,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBf,KAAA,QAAKc,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BjB,IAAA,CAACH,QAAQ,EAACiB,IAAI,CAAEkB,SAAU,CAACa,OAAO,CAAEA,OAAQ,CAAE,CAAC,cAE/C7C,IAAA,QAAKgB,SAAS,CAAC,uEAAuE,CAAAC,QAAA,cACpFf,KAAA,QAAKc,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjB,IAAA,QAAKgB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEmD,cAAc,CAAM,CAAC,cACxEpE,IAAA,QAAKgB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,OAAK,CAAK,CAAC,EAC/C,CAAC,CACH,CAAC,EACH,CAAC,cAGNf,KAAA,QAAKc,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDf,KAAA,QAAKc,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjB,IAAA,QAAKgB,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACvCH,IAAI,CAAChB,cAAc,CAACU,KAAK,CAAC,EAAI,CAAC,CAC7B,CAAC,cACNR,IAAA,QAAKgB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAAM,CAAK,CAAC,EACxC,CAAC,cACNf,KAAA,QAAKc,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjB,IAAA,QAAKgB,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACvCH,IAAI,CAAChB,cAAc,CAACS,YAAY,CAAC,EAAI,CAAC,CACpC,CAAC,cACNP,IAAA,QAAKgB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAAM,CAAK,CAAC,EACxC,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}