{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { PositionStatus } from '../types';\nexport const usePositionFilters = () => {\n  _s();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [filters, setFiltersState] = useState(() => {\n    // Initialize filters from URL on first render\n    const urlFilters = {};\n    const status = searchParams.get('status');\n    const company = searchParams.get('company');\n    const search = searchParams.get('search');\n    const dateFrom = searchParams.get('date_from');\n    const dateTo = searchParams.get('date_to');\n    if (status && Object.values(PositionStatus).includes(status)) {\n      urlFilters.status = status;\n    }\n    if (company) {\n      urlFilters.company = company;\n    }\n    if (search) {\n      urlFilters.search = search;\n    }\n    if (dateFrom) {\n      urlFilters.date_from = dateFrom;\n    }\n    if (dateTo) {\n      urlFilters.date_to = dateTo;\n    }\n    return urlFilters;\n  });\n  const isUpdatingFromURL = useRef(false);\n\n  // Update URL when filters change\n  const updateURL = useCallback(newFilters => {\n    const params = new URLSearchParams();\n    Object.entries(newFilters).forEach(([key, value]) => {\n      if (value !== undefined && value !== '') {\n        params.set(key, value);\n      }\n    });\n    setSearchParams(params, {\n      replace: true\n    });\n  }, [setSearchParams]);\n\n  // Set filters and update URL\n  const setFilters = useCallback(newFilters => {\n    setFiltersState(newFilters);\n    updateURL(newFilters);\n  }, [updateURL]);\n\n  // Update a single filter\n  const updateFilter = useCallback((key, value) => {\n    const newFilters = {\n      ...filters,\n      [key]: value || undefined\n    };\n\n    // Remove undefined values\n    Object.keys(newFilters).forEach(k => {\n      if (newFilters[k] === undefined) {\n        delete newFilters[k];\n      }\n    });\n    setFilters(newFilters);\n  }, [filters, setFilters]);\n\n  // Clear all filters\n  const clearFilters = useCallback(() => {\n    setFiltersState({});\n    setSearchParams({}, {\n      replace: true\n    });\n  }, [setSearchParams]);\n\n  // Check if any filters are active\n  const hasActiveFilters = Object.values(filters).some(value => value !== undefined && value !== '');\n\n  // Count active filters\n  const activeFilterCount = Object.values(filters).filter(value => value !== undefined && value !== '').length;\n  return {\n    filters,\n    setFilters,\n    updateFilter,\n    clearFilters,\n    hasActiveFilters,\n    activeFilterCount\n  };\n};\n_s(usePositionFilters, \"+xk/76jChLa7k4yD/ecS9rZbTQg=\", false, function () {\n  return [useSearchParams];\n});\nexport default usePositionFilters;","map":{"version":3,"names":["useState","useCallback","useRef","useSearchParams","PositionStatus","usePositionFilters","_s","searchParams","setSearchParams","filters","setFiltersState","urlFilters","status","get","company","search","dateFrom","dateTo","Object","values","includes","date_from","date_to","isUpdatingFromURL","updateURL","newFilters","params","URLSearchParams","entries","forEach","key","value","undefined","set","replace","setFilters","updateFilter","keys","k","clearFilters","hasActiveFilters","some","activeFilterCount","filter","length"],"sources":["/home/haim/github/job-search-tracker-api/frontend/src/hooks/usePositionFilters.ts"],"sourcesContent":["import { useState, useCallback, useEffect, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { PositionFilters, PositionStatus } from '../types';\n\ninterface UsePositionFiltersReturn {\n  filters: PositionFilters;\n  setFilters: (filters: PositionFilters) => void;\n  updateFilter: (key: keyof PositionFilters, value: string | undefined) => void;\n  clearFilters: () => void;\n  hasActiveFilters: boolean;\n  activeFilterCount: number;\n}\n\nexport const usePositionFilters = (): UsePositionFiltersReturn => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [filters, setFiltersState] = useState<PositionFilters>(() => {\n    // Initialize filters from URL on first render\n    const urlFilters: PositionFilters = {};\n    \n    const status = searchParams.get('status');\n    const company = searchParams.get('company');\n    const search = searchParams.get('search');\n    const dateFrom = searchParams.get('date_from');\n    const dateTo = searchParams.get('date_to');\n\n    if (status && Object.values(PositionStatus).includes(status as PositionStatus)) {\n      urlFilters.status = status as PositionStatus;\n    }\n    if (company) { urlFilters.company = company; }\n    if (search) { urlFilters.search = search; }\n    if (dateFrom) { urlFilters.date_from = dateFrom; }\n    if (dateTo) { urlFilters.date_to = dateTo; }\n\n    return urlFilters;\n  });\n  \n  const isUpdatingFromURL = useRef(false);\n\n  // Update URL when filters change\n  const updateURL = useCallback((newFilters: PositionFilters) => {\n    const params = new URLSearchParams();\n    \n    Object.entries(newFilters).forEach(([key, value]) => {\n      if (value !== undefined && value !== '') {\n        params.set(key, value);\n      }\n    });\n\n    setSearchParams(params, { replace: true });\n  }, [setSearchParams]);\n\n  // Set filters and update URL\n  const setFilters = useCallback((newFilters: PositionFilters) => {\n    setFiltersState(newFilters);\n    updateURL(newFilters);\n  }, [updateURL]);\n\n  // Update a single filter\n  const updateFilter = useCallback((key: keyof PositionFilters, value: string | undefined) => {\n    const newFilters = {\n      ...filters,\n      [key]: value || undefined,\n    };\n    \n    // Remove undefined values\n    Object.keys(newFilters).forEach(k => {\n      if (newFilters[k as keyof PositionFilters] === undefined) {\n        delete newFilters[k as keyof PositionFilters];\n      }\n    });\n    \n    setFilters(newFilters);\n  }, [filters, setFilters]);\n\n  // Clear all filters\n  const clearFilters = useCallback(() => {\n    setFiltersState({});\n    setSearchParams({}, { replace: true });\n  }, [setSearchParams]);\n\n  // Check if any filters are active\n  const hasActiveFilters = Object.values(filters).some(value => \n    value !== undefined && value !== ''\n  );\n\n  // Count active filters\n  const activeFilterCount = Object.values(filters).filter(value => \n    value !== undefined && value !== ''\n  ).length;\n\n  return {\n    filters,\n    setFilters,\n    updateFilter,\n    clearFilters,\n    hasActiveFilters,\n    activeFilterCount,\n  };\n};\n\nexport default usePositionFilters;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}